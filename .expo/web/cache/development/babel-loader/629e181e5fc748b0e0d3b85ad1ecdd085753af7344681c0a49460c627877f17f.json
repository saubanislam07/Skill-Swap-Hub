{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport ApiService from \"../services/api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext();\nvar initialState = {\n  user: null,\n  isAuthenticated: false,\n  isLoading: true,\n  error: null\n};\nvar authReducer = function authReducer(state, action) {\n  switch (action.type) {\n    case 'SET_LOADING':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isLoading: action.payload\n      });\n    case 'SET_USER':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        user: action.payload,\n        isAuthenticated: !!action.payload,\n        isLoading: false,\n        error: null\n      });\n    case 'SET_ERROR':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: action.payload,\n        isLoading: false\n      });\n    case 'LOGOUT':\n      return _objectSpread(_objectSpread({}, initialState), {}, {\n        isLoading: false\n      });\n    default:\n      return state;\n  }\n};\nexport var AuthProvider = function AuthProvider(_ref) {\n  var children = _ref.children;\n  var _useReducer = useReducer(authReducer, initialState),\n    _useReducer2 = _slicedToArray(_useReducer, 2),\n    state = _useReducer2[0],\n    dispatch = _useReducer2[1];\n  useEffect(function () {\n    checkAuthStatus();\n  }, []);\n  var checkAuthStatus = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var response = yield ApiService.verifyToken();\n        dispatch({\n          type: 'SET_USER',\n          payload: response.user\n        });\n      } catch (error) {\n        dispatch({\n          type: 'SET_USER',\n          payload: null\n        });\n      }\n    });\n    return function checkAuthStatus() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var login = function () {\n    var _ref3 = _asyncToGenerator(function* (credentials) {\n      try {\n        dispatch({\n          type: 'SET_LOADING',\n          payload: true\n        });\n        var response = yield ApiService.login(credentials);\n        dispatch({\n          type: 'SET_USER',\n          payload: response.user\n        });\n        return response;\n      } catch (error) {\n        dispatch({\n          type: 'SET_ERROR',\n          payload: error.message\n        });\n        throw error;\n      }\n    });\n    return function login(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var register = function () {\n    var _ref4 = _asyncToGenerator(function* (userData) {\n      try {\n        dispatch({\n          type: 'SET_LOADING',\n          payload: true\n        });\n        var response = yield ApiService.register(userData);\n        dispatch({\n          type: 'SET_USER',\n          payload: response.user\n        });\n        return response;\n      } catch (error) {\n        dispatch({\n          type: 'SET_ERROR',\n          payload: error.message\n        });\n        throw error;\n      }\n    });\n    return function register(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var logout = function () {\n    var _ref5 = _asyncToGenerator(function* () {\n      try {\n        yield ApiService.logout();\n        dispatch({\n          type: 'LOGOUT'\n        });\n      } catch (error) {\n        console.error('Logout error:', error);\n      }\n    });\n    return function logout() {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n  var updateUser = function updateUser(userData) {\n    dispatch({\n      type: 'SET_USER',\n      payload: userData\n    });\n  };\n  var value = _objectSpread(_objectSpread({}, state), {}, {\n    login: login,\n    register: register,\n    logout: logout,\n    updateUser: updateUser\n  });\n  return _jsx(AuthContext.Provider, {\n    value: value,\n    children: children\n  });\n};\nexport var useAuth = function useAuth() {\n  var context = useContext(AuthContext);\n  if (!context) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};","map":{"version":3,"names":["React","createContext","useContext","useReducer","useEffect","ApiService","jsx","_jsx","AuthContext","initialState","user","isAuthenticated","isLoading","error","authReducer","state","action","type","_objectSpread","payload","AuthProvider","_ref","children","_useReducer","_useReducer2","_slicedToArray","dispatch","checkAuthStatus","_ref2","_asyncToGenerator","response","verifyToken","apply","arguments","login","_ref3","credentials","message","_x","register","_ref4","userData","_x2","logout","_ref5","console","updateUser","value","Provider","useAuth","context","Error"],"sources":["C:/Kiro app dev/src/context/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useReducer, useEffect } from 'react';\r\nimport ApiService from '../services/api';\r\n\r\nconst AuthContext = createContext();\r\n\r\nconst initialState = {\r\n    user: null,\r\n    isAuthenticated: false,\r\n    isLoading: true,\r\n    error: null,\r\n};\r\n\r\nconst authReducer = (state, action) => {\r\n    switch (action.type) {\r\n        case 'SET_LOADING':\r\n            return { ...state, isLoading: action.payload };\r\n        case 'SET_USER':\r\n            return {\r\n                ...state,\r\n                user: action.payload,\r\n                isAuthenticated: !!action.payload,\r\n                isLoading: false,\r\n                error: null,\r\n            };\r\n        case 'SET_ERROR':\r\n            return {\r\n                ...state,\r\n                error: action.payload,\r\n                isLoading: false,\r\n            };\r\n        case 'LOGOUT':\r\n            return {\r\n                ...initialState,\r\n                isLoading: false,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [state, dispatch] = useReducer(authReducer, initialState);\r\n\r\n    useEffect(() => {\r\n        checkAuthStatus();\r\n    }, []);\r\n\r\n    const checkAuthStatus = async () => {\r\n        try {\r\n            const response = await ApiService.verifyToken();\r\n            dispatch({ type: 'SET_USER', payload: response.user });\r\n        } catch (error) {\r\n            dispatch({ type: 'SET_USER', payload: null });\r\n        }\r\n    };\r\n\r\n    const login = async (credentials) => {\r\n        try {\r\n            dispatch({ type: 'SET_LOADING', payload: true });\r\n            const response = await ApiService.login(credentials);\r\n            dispatch({ type: 'SET_USER', payload: response.user });\r\n            return response;\r\n        } catch (error) {\r\n            dispatch({ type: 'SET_ERROR', payload: error.message });\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const register = async (userData) => {\r\n        try {\r\n            dispatch({ type: 'SET_LOADING', payload: true });\r\n            const response = await ApiService.register(userData);\r\n            dispatch({ type: 'SET_USER', payload: response.user });\r\n            return response;\r\n        } catch (error) {\r\n            dispatch({ type: 'SET_ERROR', payload: error.message });\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    const logout = async () => {\r\n        try {\r\n            await ApiService.logout();\r\n            dispatch({ type: 'LOGOUT' });\r\n        } catch (error) {\r\n            console.error('Logout error:', error);\r\n        }\r\n    };\r\n\r\n    const updateUser = (userData) => {\r\n        dispatch({ type: 'SET_USER', payload: userData });\r\n    };\r\n\r\n    const value = {\r\n        ...state,\r\n        login,\r\n        register,\r\n        logout,\r\n        updateUser,\r\n    };\r\n\r\n    return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (!context) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}